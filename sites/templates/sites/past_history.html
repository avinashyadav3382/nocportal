{% extends 'sites/base_global_dashboard.html' %}
{% load static %}

{% block content %}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">

<style>
    .table {
        border-collapse: separate;
        border-spacing: 0 10px; /* row gap */
    }

    .table thead th {
        background-color: #f8f9fa;
        color: #212529;
        border: 1px solid #dee2e6;
        padding: 12px;
        text-align: center;
        vertical-align: middle;
    }

    .table tbody td {
        border: 1px solid #dee2e6;
        padding: 12px 14px;
        text-align: center;
        vertical-align: middle;
        background-color: #ffffff;
    }

    tr.has-error td {
        border-color: #dc3545 !important;
        background-color: #fff5f5;
    }
</style>

<div class="container-fluid py-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="mb-0">Past 48 Hrs Status History</h2>
    </div>

    <table id="dataTable" class="table mb-0">
        <thead>
            <tr>
                <th>Sl No.</th>
                <th>Site Name</th>
                <th>Past Status</th>
                <th>Changed Status</th>
                <th>Status Changed Time</th>
            </tr>
        </thead>
        <tbody>
            {% for data in data_list %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ data.site__sitename }}</td>
                <td>{{ data.past_status }}</td>
                <td>{{ data.current_status }}</td>
                <td>{{ data.status_changed_at }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5" class="text-center text-muted py-3">No records found</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>

<script>
    $(document).ready(function () {
        $('#dataTable').DataTable({
            pageLength: 10,
            ordering: true
        });
    });
</script>

{% endblock %}
